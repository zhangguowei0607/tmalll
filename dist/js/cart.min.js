"use strict";$(".search_btn1").mouseenter(function(){$(".search_box").css({display:"block"}),$(".search_box p").each(function(){var o=$(".search_btn1").val();$(".search_box p").click(function(){var e=$(this).html();console.log(o),$(".search_btn1").val(e)})})}),$(".search_box").mouseleave(function(){$(".search_box").css({display:"none"})}),$(".shop ul li").each(function(){$(".shop ul li").mouseenter(function(){$(this).addClass("shop_active").siblings().removeClass("shop_active")})}),$(".cart ul li").each(function(){$(".cart ul li").mouseenter(function(){$(this).addClass("cart_active").siblings().removeClass("cart_active")})}),window.onload=function(){var e=document.querySelector(".cart_close_sum"),o=document.querySelector(".cart_close_num"),c=document.querySelector(".cart_shop_text").value,n=document.querySelector(".cart_shop_sum").innerHTML;o.innerHTML=c,e.innerHTML=n,0<document.querySelector(".cart_close_num").innerHTML?($(".cart_null").css({display:"none"}),$(".cart_close_btn").css({background:"red"})):($(".cart_null").css({display:"block"}),$(".cart_close_btn").css({background:"#b0b0b0"}))};var oCart=document.querySelector(".cart"),storage=window.localStorage,storageStr=storage.getItem("shop")?storage.getItem("shop"):"",storageObj=abc(storageStr);for(var shopId in storageObj){var goodInfo=storageObj[shopId];console.log(goodInfo);var oDiv=document.createElement("div");oDiv.className="cart_shop";var str='\n        <dl class="cart_shop_title">\n            <dd>商品信息</dd>\n            <dd>单价</dd>\n            <dd>数量</dd>\n            <dd>金额</dd>\n            <dd>操作</dd>\n        </dl>\n        <dl class="cart_shop_name">\n            <dt>'.concat(goodInfo.store,'</dt>\n        </dl>\n        <dl class="cart_shop_details">\n            <dd>\n                <img src="').concat(goodInfo.src,'" alt="">\n                <p>').concat(goodInfo.name,'</p>\n                <p class="cart_shop_color">颜色分类：<span>').concat(goodInfo.color,'</span></p>\n                <p class="cart_shop_size">尺码：<span>').concat(goodInfo.size,'</span></p>\n            </dd>\n            <dd class="cart_shop_price">￥').concat(goodInfo.price,'</dd>\n            <dd class="cart_shop_num">\n                <button class="cart_shop_up">-</button>\n                <input type="text" value="').concat(goodInfo.num,'" class="cart_shop_text">\n                <button class="cart_shop_down">+</button>\n            </dd>\n            <dd class="cart_shop_sum">￥').concat(goodInfo.price*goodInfo.num,'</dd>\n            <dd class="cart_shop_remove">删除</dd>\n        </dl>\n    ');oDiv.innerHTML=str,oCart.appendChild(oDiv)}var oMinus=document.querySelector(".cart_shop_up");oMinus.onclick=function(){console.log(1);var e=document.querySelector(".cart_shop_name").firstElementChild.innerHTML,o=window.localStorage,c=abc(o.getItem("shop")?o.getItem("shop"):"");1<c[e].num&&c[e].num--,o.setItem("shop",JSON.stringify(c));var n=document.querySelector(".cart_shop_text"),t=document.querySelector(".cart_shop_sum");n.value=c[e].num,t.innerHTML="￥".concat(c[e].num*c[e].price);var r=document.querySelector(".cart_close_sum"),s=document.querySelector(".cart_close_num");s.innerHTML=c[e].num,r.innerHTML="".concat(c[e].num*c[e].price),0<s.innerHTML?($(".cart_null").css({display:"none"}),$(".cart_close_btn").css({background:"red"})):($(".cart_null").css({display:"block"}),$(".cart_close_btn").css({background:"#b0b0b0"}))};var oPlus=document.querySelector(".cart_shop_down");oPlus.onclick=function(){var e=document.querySelector(".cart_shop_name").firstElementChild.innerHTML,o=window.localStorage,c=abc(o.getItem("shop")?o.getItem("shop"):"");c[e].num++,o.setItem("shop",JSON.stringify(c));var n=document.querySelector(".cart_shop_text"),t=document.querySelector(".cart_shop_sum");n.value=c[e].num,t.innerHTML="￥".concat(c[e].num*c[e].price);var r=document.querySelector(".cart_close_sum"),s=document.querySelector(".cart_close_num");s.innerHTML=c[e].num,r.innerHTML="".concat(c[e].num*c[e].price),0<s.innerHTML?($(".cart_null").css({display:"none"}),$(".cart_close_btn").css({background:"red"})):($(".cart_null").css({display:"block"}),$(".cart_close_btn").css({background:"#b0b0b0"}))};var oText=document.querySelector(".cart_shop_text");oText.onblur=function(){var e=document.querySelector(".cart_shop_name").firstElementChild.innerHTML,o=window.localStorage,c=abc(o.getItem("shop")?o.getItem("shop"):""),n=parseInt(this.value);(n<1||isNaN(n))&&(n=1),c[e].num=n,o.setItem("shop",JSON.stringify(c)),this.value=c[e].num,document.querySelector(".cart_shop_sum").innerHTML="￥".concat(c[e].num*c[e].price);var t=document.querySelector(".cart_close_sum"),r=document.querySelector(".cart_close_num");r.innerHTML=c[e].num,t.innerHTML="".concat(c[e].num*c[e].price),0<r.innerHTML?($(".cart_null").css({display:"none"}),$(".cart_close_btn").css({background:"red"})):($(".cart_null").css({display:"block"}),$(".cart_close_btn").css({background:"#b0b0b0"}))};var oDel=document.querySelector(".cart_shop_remove");function abc(e){return isNaN(e)?JSON.parse(e):{}}oDel.onclick=function(){var e=document.querySelector(".cart_shop_name").firstElementChild.innerHTML,o=window.localStorage,c=abc(o.getItem("shop")?o.getItem("shop"):"");delete c[e],o.setItem("shop",JSON.stringify(c)),this.parentNode.parentNode.remove();var n=document.querySelector(".cart_close_sum"),t=document.querySelector(".cart_close_num");t.innerHTML=0,n.innerHTML="0.00",0<t.innerHTML?($(".cart_null").css({display:"none"}),$(".cart_close_btn").css({background:"red"})):($(".cart_null").css({display:"block"}),$(".cart_close_btn").css({background:"#b0b0b0"}))};